@typeparam T
@inherits MudExBaseInput<T>

<CascadingValue Name="SubscribeToParentForm2" Value="@SubscribeToParentForm2" IsFixed="true">
    <MudInputControl Label="@Label"
                     Variant="@Variant"
                     HelperText="@HelperText"
                     HelperTextOnFocus="@HelperTextOnFocus"
                     CounterText="@GetCounterText()"
                     FullWidth="@FullWidth"
                     Class="@Classname"
                     Error="@HasErrors"
                     ErrorText="@GetErrorText()"
                     ErrorId="@ErrorId"
                     Disabled="@Disabled"
                     Margin="@Margin"
                     Required="@Required"
                     ForId="@FieldId">
        <InputContent>
            <CascadingValue Name="SubscribeToParentForm2" Value="false" IsFixed="true">
                @if (_mask == null)
                {
                    <MudExInput T="string"
                                @ref="InputReference"
                                @attributes="UserAttributes"
                                InputType="@InputType"
                                Lines="@Lines"
                                Color="@Color"
                                AdornmentColor="@AdornmentColor"
                                AdornmentIcon="@AdornmentIcon"
                                AdornmentText="@AdornmentText"
                                Adornment="@Adornment"
                                Style="@Style"
                                Variant="@Variant"
                                TextUpdateSuppression="@TextUpdateSuppression"
                                Value="@Text"
                                ValueChanged="(s) => SetTextAsync(s)"
                                Placeholder="@Placeholder"
                                Disabled=@Disabled
                                DisableUnderLine="@DisableUnderLine"
                                ReadOnly="@ReadOnly"
                                MaxLength="@MaxLength"
                                IconSize="@IconSize"
                                Error="@Error"
                                ErrorId="@ErrorId"
                                Immediate="@Immediate"
                                Margin="@Margin"
                                OnBlur="@OnBlurredAsync"
                                OnKeyDown="@InvokeKeyDownAsync"
                                OnInternalInputChanged="OnChange"
                                OnKeyPress="@InvokeKeyPressObsolete"
                                OnKeyUp="@InvokeKeyUpAsync"
                                KeyDownStopPropagation="KeyDownStopPropagation"
                                KeyUpStopPropagation="KeyUpStopPropagation"
                                KeyDownPreventDefault="KeyDownPreventDefault"
                                KeyPressPreventDefault="KeyPressPreventDefault"
                                KeyUpPreventDefault="KeyUpPreventDefault"
                                HideSpinButtons="true"
                                Clearable="@Clearable"
                                OnClearButtonClick="@OnClearButtonClick"
                                Pattern="@Pattern"
                                AdornmentStart="@AdornmentStart"
                                AdornmentEnd="@AdornmentEnd"
                                AutoSize="AutoSize"
                                ForceShrink="@ForceShrink"
                                ShowVisualiser="@(DataVisualiser != null && ShowVisualiser)"
                                DataVisualiserStyle="@(DataVisualiserStyleStr())">
                        <DataVisualiser>
                            @DataVisualiser
                        </DataVisualiser>

                    </MudExInput>
                }
                else
                {
                    <MudMask @ref="_maskReference"
                             @attributes="UserAttributes"
                             Mask="@_mask"
                             InputType="@InputType"
                             Lines="@Lines"
                             Style="@Style"
                             Variant="@Variant"
                             TextUpdateSuppression="@TextUpdateSuppression"
                             Value="@Text"
                             ValueChanged="OnMaskedValueChanged"
                             Placeholder="@Placeholder"
                             Disabled=@Disabled
                             DisableUnderLine="@DisableUnderLine"
                             ReadOnly="@ReadOnly"
                             MaxLength="@MaxLength"
                             IconSize="@IconSize"
                             Error="@Error"
                             Immediate="@Immediate"
                             Margin="@Margin" OnBlur="@OnBlurredAsync"
                             Clearable="@Clearable"
                             OnClearButtonClick="@OnClearButtonClick" />
                }
            </CascadingValue>
        </InputContent>
    </MudInputControl>
</CascadingValue>