export function initializeMudExSplitter(t,i,r){return new n(t,i,r)}class n{constructor(n,t,i){this.dotNet=t;this.initialize(i);this.documentMouseUp=document.onmouseup;this.documentMouseMove=document.onmousemove}initialize(n){this.options=n;const t=document.querySelector(`.mud-ex-splitter[data-id="${n.id}"]`);t&&(this.initSplitter(t),this.saveInitialState())}saveInitialState(){this.initialState={splitterStyle:{...this.splitter.style},prevElemStyle:{...this.prevElem?.style},nextElemStyle:{...this.nextElem?.style}}}reset(){this.splitter.style=this.initialState.splitterStyle;this.prevElem&&(this.prevElem.style=this.initialState.prevElemStyle);this.nextElem&&(this.nextElem.style=this.initialState.nextElemStyle)}restore(){this.splitter.style=this.currentState.splitterStyle;this.prevElem&&(this.prevElem.style=this.currentState.prevElemStyle);this.nextElem&&(this.nextElem.style=this.currentState.nextElemStyle)}initSplitter(n){this.splitter=n;n.style.opacity=this.options.opacity;n.addEventListener("mouseenter",()=>n.style.opacity=this.options.hoverOpacity);n.addEventListener("mouseleave",()=>n.style.opacity=this.options.opacity);this.prevElem=n.previousElementSibling;this.prevElem=this.options?.prevElement||this.findSiblingElement(n,n=>n.previousElementSibling,["mud-ex-splitter-internal"]);this.nextElem=this.options?.nextElement||this.findSiblingElement(n,n=>n.nextElementSibling,["mud-ex-splitter-internal"]);this.direction=this.options.verticalSplit?"V":"H";this.stretchOtherDirection();this.dragElement()}findSiblingElement(n,t,i){i=Array.isArray(i)?i:[i];let r=t(n);while(r){if(!i.some(n=>r.classList.contains(n)))return r;r=t(r)}return null}dragElement(){let t,n;this.splitter.onmousedown=r=>{t=this.getMouseDownInfo(r),this.splitter.style.opacity=this.options.hoverOpacity,n=document.createElement("div"),n.style.position="fixed",n.style.top="0",n.style.right="0",n.style.bottom="0",n.style.left="0",n.style.zIndex="99999",n.style.cursor="default",document.body.appendChild(n),document.onmousemove=i,this.dotNet.invokeMethodAsync("OnDragStart"),document.onmouseup=()=>{this.splitter.style.opacity=this.options.opacity,n&&n.parentNode.removeChild(n),this.resetDocumentMouseEvents(),this.apply()}};const i=n=>{const i=this.getDelta(n,t),{x:r,y:u}=this.getLimitedDelta(i,t);this.splitter.style.opacity=this.options.hoverOpacity;this.direction==="H"?this.updateHorizontalElements(r,t):this.direction==="V"&&this.updateVerticalElements(u,t);this.options.draggingAttached&&this.dotNet.invokeMethodAsync("OnDragging",this.prevElem?.getBoundingClientRect(),this.nextElem?.getBoundingClientRect())}}apply(){if(this.options.dontApply){this.reset();return}this.currentState={splitterStyle:{...this.splitter.style},prevElemStyle:{...this.prevElem?.style},nextElemStyle:{...this.nextElem?.style}};this.options.percentage&&this.updateElementsInPercentage();this.stretchOtherDirection();this.dotNet.invokeMethodAsync("OnDragEnd",this.prevElem?.getBoundingClientRect(),this.nextElem?.getBoundingClientRect())}stretchOtherDirection(){this.nextElem&&this.prevElem&&(this.direction==="H"?(this.prevElem&&(this.prevElem.style.height="unset"),this.nextElem&&(this.nextElem.style.height="unset")):(this.prevElem&&(this.prevElem.style.width="100%"),this.nextElem&&(this.nextElem.style.width="100%")))}getMouseDownInfo(n){return{event:n,offsetLeft:this.splitter.offsetLeft,offsetTop:this.splitter.offsetTop,prevWidth:this.prevElem?.offsetWidth,prevHeight:this.prevElem?.offsetHeight,nextWidth:this.nextElem?.offsetWidth,nextHeight:this.nextElem?.offsetHeight}}getDelta(n,t){return{x:this.options.reverse?t.event.clientX-n.clientX:n.clientX-t.event.clientX,y:this.options.reverse?t.event.clientY-n.clientY:n.clientY-t.event.clientY}}getLimitedDelta(n,t){const i=50;if(this.direction==="H"){if(this.prevElem){const r=t.prevWidth-i;n.x=Math.min(n.x,r)}if(this.nextElem){const r=i-t.nextWidth;n.x=Math.max(n.x,r)}}else{if(this.prevElem){const r=t.prevHeight-i;n.y=Math.min(n.y,r)}if(this.nextElem){const r=i-t.nextHeight;n.y=Math.max(n.y,r)}}return n}updateHorizontalElements(n,t){if(this.prevElem&&this.nextElem&&(this.splitter.style.left=t.offsetLeft+n+"px"),this.prevElem&&(this.prevElem.style.width=t.prevWidth+n+"px"),this.nextElem){const i=this.prevElem?t.nextWidth-n:t.nextWidth+n;this.nextElem.style.width=i+"px"}}updateVerticalElements(n,t){if(this.prevElem&&this.nextElem&&(this.splitter.style.top=t.offsetTop+n+"px"),this.prevElem&&(this.prevElem.style.height=t.prevHeight+n+"px"),this.nextElem){const i=this.prevElem?t.nextHeight-n:t.nextHeight+n;this.nextElem.style.height=i+"px"}}updateElementsInPercentage(){const n=this.prevElem?.parentElement?.clientWidth,t=this.prevElem?.parentElement?.clientHeight,i=this.prevElem?this.prevElem.offsetWidth/n*100:null,r=this.prevElem?this.prevElem.offsetHeight/t*100:null,u=this.nextElem?this.nextElem.offsetWidth/n*100:null,f=this.nextElem?this.nextElem.offsetHeight/t*100:null;this.prevElem&&i&&(this.prevElem.style.width=`${i}%`);this.prevElem&&r&&(this.prevElem.style.height=`${r}%`);this.nextElem&&u&&(this.nextElem.style.width=`${u}%`);this.nextElem&&f&&(this.nextElem.style.height=`${f}%`)}resetDocumentMouseEvents(){document.onmousemove=this.documentMouseMove;document.onmouseup=this.documentMouseUp}getSize(){var n=this.prevElem?.getBoundingClientRect(),t=this.nextElem?.getBoundingClientRect();return{prev:{width:this.prevElem?.style?.width,height:this.prevElem?.style?.height,bounds:n},next:{width:this.nextElem?.style?.width,height:this.nextElem?.style?.height,bounds:t}}}dispose(){this.splitter.onmousedown=null;this.resetDocumentMouseEvents();this.documentMouseMove=this.documentMouseUp=null;this.direction=this.splitter=this.prevElem=this.nextElem=null}}window.MudExSplitter=n;