/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/scrollbar.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{toggleClass,watchElementResize}from"./dom";import{addDisposableListener}from"./events";import{CompositeDisposable}from"./lifecycle";import{clamp}from"./math";export class Scrollbar extends CompositeDisposable{get element(){return this._element}constructor(e){super(),this.scrollableElement=e,this._scrollLeft=0,this._element=document.createElement("div"),this._element.className="dv-scrollable",this._horizontalScrollbar=document.createElement("div"),this._horizontalScrollbar.className="dv-scrollbar-horizontal",this.element.appendChild(e),this.element.appendChild(this._horizontalScrollbar),this.addDisposables(addDisposableListener(this.element,"wheel",(e=>{this._scrollLeft+=e.deltaY*Scrollbar.MouseWheelSpeed,this.calculateScrollbarStyles()})),addDisposableListener(this._horizontalScrollbar,"pointerdown",(e=>{e.preventDefault(),toggleClass(this.element,"dv-scrollable-scrolling",!0);const l=e.clientX,t=this._scrollLeft,s=e=>{const s=e.clientX-l,{clientWidth:o}=this.element,{scrollWidth:i}=this.scrollableElement,r=o/i;this._scrollLeft=t+s/r,this.calculateScrollbarStyles()},o=()=>{toggleClass(this.element,"dv-scrollable-scrolling",!1),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",o),document.removeEventListener("pointercancel",o)};document.addEventListener("pointermove",s),document.addEventListener("pointerup",o),document.addEventListener("pointercancel",o)})),addDisposableListener(this.element,"scroll",(()=>{this.calculateScrollbarStyles()})),addDisposableListener(this.scrollableElement,"scroll",(()=>{this._scrollLeft=this.scrollableElement.scrollLeft,this.calculateScrollbarStyles()})),watchElementResize(this.element,(()=>{toggleClass(this.element,"dv-scrollable-resizing",!0),this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout((()=>{clearTimeout(this._animationTimer),toggleClass(this.element,"dv-scrollable-resizing",!1)}),500),this.calculateScrollbarStyles()})))}calculateScrollbarStyles(){const{clientWidth:e}=this.element,{scrollWidth:l}=this.scrollableElement;if(l>e){const t=e*(e/l);this._horizontalScrollbar.style.width=`${t}px`,this._scrollLeft=clamp(this._scrollLeft,0,this.scrollableElement.scrollWidth-e),this.scrollableElement.scrollLeft=this._scrollLeft;const s=this._scrollLeft/(l-e);this._horizontalScrollbar.style.left=(e-t)*s+"px"}else this._horizontalScrollbar.style.width="0px",this._horizontalScrollbar.style.left="0px",this._scrollLeft=0}}Scrollbar.MouseWheelSpeed=1;
//# sourceMappingURL=/sm/eb4dfe1b8245463f5ed4060d5095dbc19e6eefa7b084507f91545d929cc7a002.map