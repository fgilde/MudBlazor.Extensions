/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/paneview/draggablePaneviewPanel.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{PaneviewApi}from"../api/component.api";import{DragHandler}from"../dnd/abstractDragHandler";import{getPaneData,LocalSelectionTransfer,PaneTransfer}from"../dnd/dataTransfer";import{Droptarget}from"../dnd/droptarget";import{Emitter}from"../events";import{PaneviewUnhandledDragOverEvent}from"./options";import{PaneviewPanel}from"./paneviewPanel";export class DraggablePaneviewPanel extends PaneviewPanel{constructor(e){super({id:e.id,component:e.component,headerComponent:e.headerComponent,orientation:e.orientation,isExpanded:e.isExpanded,isHeaderVisible:!0,headerSize:e.headerSize,minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize}),this._onDidDrop=new Emitter,this.onDidDrop=this._onDidDrop.event,this._onUnhandledDragOverEvent=new Emitter,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this.accessor=e.accessor,this.addDisposables(this._onDidDrop,this._onUnhandledDragOverEvent),e.disableDnd||this.initDragFeatures()}initDragFeatures(){if(!this.header)return;const e=this.id,t=this.accessor.id;this.header.draggable=!0,this.handler=new class extends DragHandler{getData(){return LocalSelectionTransfer.getInstance().setData([new PaneTransfer(t,e)],PaneTransfer.prototype),{dispose:()=>{LocalSelectionTransfer.getInstance().clearData(PaneTransfer.prototype)}}}}(this.header),this.target=new Droptarget(this.element,{acceptedTargetZones:["top","bottom"],overlayModel:{activationSize:{type:"percentage",value:50}},canDisplayOverlay:(e,t)=>{const a=getPaneData();if(a&&a.paneId!==this.id&&a.viewId===this.accessor.id)return!0;const n=new PaneviewUnhandledDragOverEvent(e,t,getPaneData,this);return this._onUnhandledDragOverEvent.fire(n),n.isAccepted}}),this.addDisposables(this._onDidDrop,this.handler,this.target,this.target.onDrop((e=>{this.onDrop(e)})))}onDrop(e){const t=getPaneData();if(!t||t.viewId!==this.accessor.id)return void this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,api:new PaneviewApi(this.accessor),getData:getPaneData}));const a=this._params.containerApi,n=t.paneId,i=a.getPanel(n);if(!i)return void this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,getData:getPaneData,api:new PaneviewApi(this.accessor)}));const r=a.panels,o=r.indexOf(i);let s=a.panels.indexOf(this);"left"!==e.position&&"top"!==e.position||(s=Math.max(0,s-1)),"right"!==e.position&&"bottom"!==e.position||(o>s&&s++,s=Math.min(r.length-1,s)),a.movePanel(o,s)}}
//# sourceMappingURL=/sm/0909b18ea92eb770b0f3185640e39b3a65f077edc14d9c0cdc69674358d32417.map