/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/paneview/paneviewComponent.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{PaneviewApi}from"../api/component.api";import{Emitter}from"../events";import{CompositeDisposable,MutableDisposable}from"../lifecycle";import{Orientation,Sizing}from"../splitview/splitview";import{Paneview}from"./paneview";import{DraggablePaneviewPanel}from"./draggablePaneviewPanel";import{DefaultHeader}from"./defaultPaneviewHeader";import{sequentialNumberGenerator}from"../math";import{Resizable}from"../resizable";import{Classnames}from"../dom";const nextLayoutId=sequentialNumberGenerator(),HEADER_SIZE=22,MINIMUM_BODY_SIZE=0,MAXIMUM_BODY_SIZE=Number.MAX_SAFE_INTEGER;export class PaneFramework extends DraggablePaneviewPanel{constructor(e){super({accessor:e.accessor,id:e.id,component:e.component,headerComponent:e.headerComponent,orientation:e.orientation,isExpanded:e.isExpanded,disableDnd:e.disableDnd,headerSize:e.headerSize,minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize}),this.options=e}getBodyComponent(){return this.options.body}getHeaderComponent(){return this.options.header}}export class PaneviewComponent extends Resizable{get id(){return this._id}get panels(){return this.paneview.getPanes()}set paneview(e){this._paneview=e,this._disposable.value=new CompositeDisposable(this._paneview.onDidChange((()=>{this._onDidLayoutChange.fire(void 0)})),this._paneview.onDidAddView((e=>this._onDidAddView.fire(e))),this._paneview.onDidRemoveView((e=>this._onDidRemoveView.fire(e))))}get paneview(){return this._paneview}get minimumSize(){return this.paneview.minimumSize}get maximumSize(){return this.paneview.maximumSize}get height(){return this.paneview.orientation===Orientation.HORIZONTAL?this.paneview.orthogonalSize:this.paneview.size}get width(){return this.paneview.orientation===Orientation.HORIZONTAL?this.paneview.size:this.paneview.orthogonalSize}get options(){return this._options}constructor(e,i){var t;super(document.createElement("div"),i.disableAutoResizing),this._id=nextLayoutId.next(),this._disposable=new MutableDisposable,this._viewDisposables=new Map,this._onDidLayoutfromJSON=new Emitter,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidLayoutChange=new Emitter,this.onDidLayoutChange=this._onDidLayoutChange.event,this._onDidDrop=new Emitter,this.onDidDrop=this._onDidDrop.event,this._onDidAddView=new Emitter,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new Emitter,this.onDidRemoveView=this._onDidRemoveView.event,this._onUnhandledDragOverEvent=new Emitter,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this.element.style.height="100%",this.element.style.width="100%",this.addDisposables(this._onDidLayoutChange,this._onDidLayoutfromJSON,this._onDidDrop,this._onDidAddView,this._onDidRemoveView,this._onUnhandledDragOverEvent),this._classNames=new Classnames(this.element),this._classNames.setClassNames(null!==(t=i.className)&&void 0!==t?t:""),e.appendChild(this.element),this._options=i,this.paneview=new Paneview(this.element,{orientation:Orientation.VERTICAL}),this.addDisposables(this._disposable)}setVisible(e,i){const t=this.panels.indexOf(e);this.paneview.setViewVisible(t,i)}focus(){}updateOptions(e){var i,t;"className"in e&&this._classNames.setClassNames(null!==(i=e.className)&&void 0!==i?i:""),"disableResizing"in e&&(this.disableResizing=null!==(t=e.disableAutoResizing)&&void 0!==t&&t),this._options=Object.assign(Object.assign({},this.options),e)}addPanel(e){var i,t;const n=this.options.createComponent({id:e.id,name:e.component});let o;e.headerComponent&&this.options.createHeaderComponent&&(o=this.options.createHeaderComponent({id:e.id,name:e.headerComponent})),o||(o=new DefaultHeader);const s=new PaneFramework({id:e.id,component:e.component,headerComponent:e.headerComponent,header:o,body:n,orientation:Orientation.VERTICAL,isExpanded:!!e.isExpanded,disableDnd:!!this.options.disableDnd,accessor:this,headerSize:null!==(i=e.headerSize)&&void 0!==i?i:22,minimumBodySize:0,maximumBodySize:MAXIMUM_BODY_SIZE});this.doAddPanel(s);const a="number"==typeof e.size?e.size:Sizing.Distribute,d="number"==typeof e.index?e.index:void 0;return s.init({params:null!==(t=e.params)&&void 0!==t?t:{},minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize,isExpanded:e.isExpanded,title:e.title,containerApi:new PaneviewApi(this),accessor:this}),this.paneview.addPane(s,a,d),s.orientation=this.paneview.orientation,s}removePanel(e){const i=this.panels.findIndex((i=>i===e));this.paneview.removePane(i),this.doRemovePanel(e)}movePanel(e,i){this.paneview.moveView(e,i)}getPanel(e){return this.panels.find((i=>i.id===e))}layout(e,i){const[t,n]=this.paneview.orientation===Orientation.HORIZONTAL?[e,i]:[i,e];this.paneview.layout(t,n)}toJSON(){const e=e=>e===Number.MAX_SAFE_INTEGER||e===Number.POSITIVE_INFINITY?void 0:e;return{views:this.paneview.getPanes().map(((i,t)=>{return{size:this.paneview.getViewSize(t),data:i.toJSON(),minimumSize:(n=i.minimumBodySize,n<=0?void 0:n),maximumSize:e(i.maximumBodySize),headerSize:i.headerSize,expanded:i.isExpanded()};var n})),size:this.paneview.size}}fromJSON(e){this.clear();const{views:i,size:t}=e,n=[],o=this.width,s=this.height;this.paneview=new Paneview(this.element,{orientation:Orientation.VERTICAL,descriptor:{size:t,views:i.map((e=>{var i,t,o;const s=e.data,a=this.options.createComponent({id:s.id,name:s.component});let d;s.headerComponent&&this.options.createHeaderComponent&&(d=this.options.createHeaderComponent({id:s.id,name:s.headerComponent})),d||(d=new DefaultHeader);const r=new PaneFramework({id:s.id,component:s.component,headerComponent:s.headerComponent,header:d,body:a,orientation:Orientation.VERTICAL,isExpanded:!!e.expanded,disableDnd:!!this.options.disableDnd,accessor:this,headerSize:null!==(i=e.headerSize)&&void 0!==i?i:22,minimumBodySize:null!==(t=e.minimumSize)&&void 0!==t?t:0,maximumBodySize:null!==(o=e.maximumSize)&&void 0!==o?o:MAXIMUM_BODY_SIZE});return this.doAddPanel(r),n.push((()=>{var i;r.init({params:null!==(i=s.params)&&void 0!==i?i:{},minimumBodySize:e.minimumSize,maximumBodySize:e.maximumSize,title:s.title,isExpanded:!!e.expanded,containerApi:new PaneviewApi(this),accessor:this}),r.orientation=this.paneview.orientation})),setTimeout((()=>{this._onDidAddView.fire(r)}),0),{size:e.size,view:r}}))}}),this.layout(o,s),n.forEach((e=>e())),this._onDidLayoutfromJSON.fire()}clear(){for(const[e,i]of this._viewDisposables.entries())i.dispose();this._viewDisposables.clear(),this.paneview.dispose()}doAddPanel(e){const i=new CompositeDisposable(e.onDidDrop((e=>{this._onDidDrop.fire(e)})),e.onUnhandledDragOverEvent((e=>{this._onUnhandledDragOverEvent.fire(e)})));this._viewDisposables.set(e.id,i)}doRemovePanel(e){const i=this._viewDisposables.get(e.id);i&&(i.dispose(),this._viewDisposables.delete(e.id))}dispose(){super.dispose();for(const[e,i]of this._viewDisposables.entries())i.dispose();this._viewDisposables.clear(),this.element.remove(),this.paneview.dispose()}}
//# sourceMappingURL=/sm/e75cdbd162d90c1ddc5262c36d39b30eb3b78e8b9dce8d6e4145c1e002002093.map