/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/dockview/components/titlebar/tabsContainer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{CompositeDisposable,Disposable,MutableDisposable}from"../../../lifecycle";import{addDisposableListener,Emitter}from"../../../events";import{VoidContainer}from"./voidContainer";import{findRelativeZIndexParent,toggleClass}from"../../../dom";import{WillShowOverlayLocationEvent}from"../../events";import{getPanelData}from"../../../dnd/dataTransfer";import{Tabs}from"./tabs";import{createDropdownElementHandle}from"./tabOverflowControl";export class TabsContainer extends CompositeDisposable{get onTabDragStart(){return this.tabs.onTabDragStart}get panels(){return this.tabs.panels}get size(){return this.tabs.size}get hidden(){return this._hidden}set hidden(t){this._hidden=t,this.element.style.display=t?"none":""}get element(){return this._element}constructor(t,e){super(),this.accessor=t,this.group=e,this._hidden=!1,this.dropdownPart=null,this._overflowTabs=[],this._dropdownDisposable=new MutableDisposable,this._onDrop=new Emitter,this.onDrop=this._onDrop.event,this._onGroupDragStart=new Emitter,this.onGroupDragStart=this._onGroupDragStart.event,this._onWillShowOverlay=new Emitter,this.onWillShowOverlay=this._onWillShowOverlay.event,this._element=document.createElement("div"),this._element.className="dv-tabs-and-actions-container",toggleClass(this._element,"dv-full-width-single-tab","fullwidth"===this.accessor.options.singleTabMode),this.rightActionsContainer=document.createElement("div"),this.rightActionsContainer.className="dv-right-actions-container",this.leftActionsContainer=document.createElement("div"),this.leftActionsContainer.className="dv-left-actions-container",this.preActionsContainer=document.createElement("div"),this.preActionsContainer.className="dv-pre-actions-container",this.tabs=new Tabs(e,t,{showTabsOverflowControl:!t.options.disableTabsOverflowList}),this.voidContainer=new VoidContainer(this.accessor,this.group),this._element.appendChild(this.preActionsContainer),this._element.appendChild(this.tabs.element),this._element.appendChild(this.leftActionsContainer),this._element.appendChild(this.voidContainer.element),this._element.appendChild(this.rightActionsContainer),this.addDisposables(this.tabs.onDrop((t=>this._onDrop.fire(t))),this.tabs.onWillShowOverlay((t=>this._onWillShowOverlay.fire(t))),t.onDidOptionsChange((()=>{this.tabs.showTabsOverflowControl=!t.options.disableTabsOverflowList})),this.tabs.onOverflowTabsChange((t=>{this.toggleDropdown(t)})),this.tabs,this._onWillShowOverlay,this._onDrop,this._onGroupDragStart,this.voidContainer,this.voidContainer.onDragStart((t=>{this._onGroupDragStart.fire({nativeEvent:t,group:this.group})})),this.voidContainer.onDrop((t=>{this._onDrop.fire({event:t.nativeEvent,index:this.tabs.size})})),this.voidContainer.onWillShowOverlay((t=>{this._onWillShowOverlay.fire(new WillShowOverlayLocationEvent(t,{kind:"header_space",panel:this.group.activePanel,api:this.accessor.api,group:this.group,getData:getPanelData}))})),addDisposableListener(this.voidContainer.element,"pointerdown",(t=>{if(t.defaultPrevented)return;if(!this.accessor.options.disableFloatingGroups&&t.shiftKey&&"floating"!==this.group.api.location.type){t.preventDefault();const{top:e,left:i}=this.element.getBoundingClientRect(),{top:s,left:n}=this.accessor.element.getBoundingClientRect();this.accessor.addFloatingGroup(this.group,{x:i-n+20,y:e-s+20,inDragMode:!0})}})))}show(){this.hidden||(this.element.style.display="")}hide(){this._element.style.display="none"}setRightActionsElement(t){this.rightActions!==t&&(this.rightActions&&(this.rightActions.remove(),this.rightActions=void 0),t&&(this.rightActionsContainer.appendChild(t),this.rightActions=t))}setLeftActionsElement(t){this.leftActions!==t&&(this.leftActions&&(this.leftActions.remove(),this.leftActions=void 0),t&&(this.leftActionsContainer.appendChild(t),this.leftActions=t))}setPrefixActionsElement(t){this.preActions!==t&&(this.preActions&&(this.preActions.remove(),this.preActions=void 0),t&&(this.preActionsContainer.appendChild(t),this.preActions=t))}isActive(t){return this.tabs.isActive(t)}indexOf(t){return this.tabs.indexOf(t)}setActive(t){}delete(t){this.tabs.delete(t),this.updateClassnames()}setActivePanel(t){this.tabs.setActivePanel(t)}openPanel(t,e=this.tabs.size){this.tabs.openPanel(t,e),this.updateClassnames()}closePanel(t){this.delete(t.id)}updateClassnames(){toggleClass(this._element,"dv-single-tab",1===this.size)}toggleDropdown(t){const e=t.reset?[]:t.tabs;if(this._overflowTabs=e,this._overflowTabs.length>0&&this.dropdownPart)return void this.dropdownPart.update({tabs:e.length});if(0===this._overflowTabs.length)return void this._dropdownDisposable.dispose();const i=document.createElement("div");i.className="dv-tabs-overflow-dropdown-root";const s=createDropdownElementHandle();s.update({tabs:e.length}),this.dropdownPart=s,i.appendChild(s.element),this.rightActionsContainer.prepend(i),this._dropdownDisposable.value=new CompositeDisposable(Disposable.from((()=>{var t,e;i.remove(),null===(e=null===(t=this.dropdownPart)||void 0===t?void 0:t.dispose)||void 0===e||e.call(t),this.dropdownPart=null})),addDisposableListener(i,"pointerdown",(t=>{t.preventDefault()}),{capture:!0}),addDisposableListener(i,"click",(t=>{const e=document.createElement("div");e.style.overflow="auto",e.className="dv-tabs-overflow-container";for(const t of this.tabs.tabs.filter((t=>this._overflowTabs.includes(t.panel.id)))){const i=this.group.panels.find((e=>e===t.panel)),s=i.view.createTabRenderer("headerOverflow").element,n=document.createElement("div");toggleClass(n,"dv-tab",!0),toggleClass(n,"dv-active-tab",i.api.isActive),toggleClass(n,"dv-inactive-tab",!i.api.isActive),n.addEventListener("click",(e=>{this.accessor.popupService.close(),e.defaultPrevented||(t.element.scrollIntoView(),t.panel.api.setActive())})),n.appendChild(s),e.appendChild(n)}const s=findRelativeZIndexParent(i);this.accessor.popupService.openPopover(e,{x:t.clientX,y:t.clientY,zIndex:(null==s?void 0:s.style.zIndex)?`calc(${s.style.zIndex} * 2)`:void 0})})))}updateDragAndDropState(){this.tabs.updateDragAndDropState(),this.voidContainer.updateDragAndDropState()}}
//# sourceMappingURL=/sm/eaf5afda64c94dff3bd432931eb2c1744b224bc342c07f86257c420142efd6c6.map