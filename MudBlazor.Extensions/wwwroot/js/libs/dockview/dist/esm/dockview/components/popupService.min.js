/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/dockview/components/popupService.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{shiftAbsoluteElementIntoView}from"../../dom";import{addDisposableListener}from"../../events";import{CompositeDisposable,Disposable,MutableDisposable}from"../../lifecycle";export class PopupService extends CompositeDisposable{constructor(e){super(),this.root=e,this._active=null,this._activeDisposable=new MutableDisposable,this._element=document.createElement("div"),this._element.className="dv-popover-anchor",this._element.style.position="relative",this.root.prepend(this._element),this.addDisposables(Disposable.from((()=>{this.close()})),this._activeDisposable)}openPopover(e,t){var s;this.close();const i=document.createElement("div");i.style.position="absolute",i.style.zIndex=null!==(s=t.zIndex)&&void 0!==s?s:"var(--dv-overlay-z-index)",i.appendChild(e);const o=this._element.getBoundingClientRect(),l=o.left,n=o.top;i.style.top=t.y-n+"px",i.style.left=t.x-l+"px",this._element.appendChild(i),this._active=i,this._activeDisposable.value=new CompositeDisposable(addDisposableListener(window,"pointerdown",(e=>{var t;const s=e.target;if(!(s instanceof HTMLElement))return;let o=s;for(;o&&o!==i;)o=null!==(t=null==o?void 0:o.parentElement)&&void 0!==t?t:null;o||this.close()}))),requestAnimationFrame((()=>{shiftAbsoluteElementIntoView(i,this.root)}))}close(){this._active&&(this._active.remove(),this._activeDisposable.dispose(),this._active=null)}}
//# sourceMappingURL=/sm/fcd35ad6c60ff6be0bbb56e320765adf14b12d3b0f23440500088618c52b0c44.map