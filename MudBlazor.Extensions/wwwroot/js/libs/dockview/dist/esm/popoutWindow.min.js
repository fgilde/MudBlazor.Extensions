/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/popoutWindow.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(t,i,o,e){return new(o||(o=Promise))((function(s,n){function l(t){try{a(e.next(t))}catch(t){n(t)}}function d(t){try{a(e.throw(t))}catch(t){n(t)}}function a(t){var i;t.done?s(t.value):(i=t.value,i instanceof o?i:new o((function(t){t(i)}))).then(l,d)}a((e=e.apply(t,i||[])).next())}))};import{addStyles}from"./dom";import{Emitter,addDisposableListener}from"./events";import{CompositeDisposable,Disposable}from"./lifecycle";export class PopoutWindow extends CompositeDisposable{get window(){var t,i;return null!==(i=null===(t=this._window)||void 0===t?void 0:t.value)&&void 0!==i?i:null}constructor(t,i,o){super(),this.target=t,this.className=i,this.options=o,this._onWillClose=new Emitter,this.onWillClose=this._onWillClose.event,this._onDidClose=new Emitter,this.onDidClose=this._onDidClose.event,this._window=null,this.addDisposables(this._onWillClose,this._onDidClose,{dispose:()=>{this.close()}})}dimensions(){if(!this._window)return null;const t=this._window.value.screenX;return{top:this._window.value.screenY,left:t,width:this._window.value.innerWidth,height:this._window.value.innerHeight}}close(){var t,i;this._window&&(this._onWillClose.fire(),null===(i=(t=this.options).onWillClose)||void 0===i||i.call(t,{id:this.target,window:this._window.value}),this._window.disposable.dispose(),this._window=null,this._onDidClose.fire())}open(){var t,i;return __awaiter(this,void 0,void 0,(function*(){if(this._window)throw new Error("instance of popout window is already open");const o=`${this.options.url}`,e=Object.entries({top:this.options.top,left:this.options.left,width:this.options.width,height:this.options.height}).map((([t,i])=>`${t}=${i}`)).join(","),s=window.open(o,this.target,e);if(!s)return null;const n=new CompositeDisposable;this._window={value:s,disposable:n},n.addDisposables(Disposable.from((()=>{s.close()})),addDisposableListener(window,"beforeunload",(()=>{this.close()})));const l=this.createPopoutWindowContainer();return this.className&&l.classList.add(this.className),null===(i=(t=this.options).onDidOpen)||void 0===i||i.call(t,{id:this.target,window:s}),new Promise(((t,i)=>{s.addEventListener("unload",(t=>{})),s.addEventListener("load",(()=>{try{const i=s.document;i.title=document.title,i.body.appendChild(l),addStyles(i,window.document.styleSheets),addDisposableListener(s,"beforeunload",(()=>{this.close()})),t(l)}catch(t){i(t)}}))}))}))}createPopoutWindowContainer(){const t=document.createElement("div");return t.classList.add("dv-popout-window"),t.id="dv-popout-window",t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.top="0px",t.style.left="0px",t}}
//# sourceMappingURL=/sm/6db40c9cbe657a9c3d91427808d35e8fd7294112008b749f4684012f4daaab90.map