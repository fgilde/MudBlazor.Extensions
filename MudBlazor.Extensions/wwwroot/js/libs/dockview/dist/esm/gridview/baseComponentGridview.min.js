/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/gridview/baseComponentGridview.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Emitter,Event,AsapEvent}from"../events";import{getGridLocation,Gridview}from"./gridview";import{Disposable}from"../lifecycle";import{sequentialNumberGenerator}from"../math";import{Sizing}from"../splitview/splitview";import{Resizable}from"../resizable";import{Classnames}from"../dom";const nextLayoutId=sequentialNumberGenerator();export function toTarget(i){switch(i){case"left":return"left";case"right":return"right";case"above":return"top";case"below":return"bottom";default:return"center"}}export class BaseGrid extends Resizable{get id(){return this._id}get size(){return this._groups.size}get groups(){return Array.from(this._groups.values()).map((i=>i.value))}get width(){return this.gridview.width}get height(){return this.gridview.height}get minimumHeight(){return this.gridview.minimumHeight}get maximumHeight(){return this.gridview.maximumHeight}get minimumWidth(){return this.gridview.minimumWidth}get maximumWidth(){return this.gridview.maximumWidth}get activeGroup(){return this._activeGroup}get locked(){return this.gridview.locked}set locked(i){this.gridview.locked=i}constructor(i,e){var t;super(document.createElement("div"),e.disableAutoResizing),this._id=nextLayoutId.next(),this._groups=new Map,this._onDidRemove=new Emitter,this.onDidRemove=this._onDidRemove.event,this._onDidAdd=new Emitter,this.onDidAdd=this._onDidAdd.event,this._onDidMaximizedChange=new Emitter,this.onDidMaximizedChange=this._onDidMaximizedChange.event,this._onDidActiveChange=new Emitter,this.onDidActiveChange=this._onDidActiveChange.event,this._bufferOnDidLayoutChange=new AsapEvent,this.onDidLayoutChange=this._bufferOnDidLayoutChange.onEvent,this._onDidViewVisibilityChangeMicroTaskQueue=new AsapEvent,this.onDidViewVisibilityChangeMicroTaskQueue=this._onDidViewVisibilityChangeMicroTaskQueue.onEvent,this.element.style.height="100%",this.element.style.width="100%",this._classNames=new Classnames(this.element),this._classNames.setClassNames(null!==(t=e.className)&&void 0!==t?t:""),i.appendChild(this.element),this.gridview=new Gridview(!!e.proportionalLayout,e.styles,e.orientation,e.locked,e.margin),this.gridview.locked=!!e.locked,this.element.appendChild(this.gridview.element),this.layout(0,0,!0),this.addDisposables(this.gridview.onDidMaximizedNodeChange((i=>{this._onDidMaximizedChange.fire({panel:i.view,isMaximized:i.isMaximized})})),this.gridview.onDidViewVisibilityChange((()=>this._onDidViewVisibilityChangeMicroTaskQueue.fire())),this.onDidViewVisibilityChangeMicroTaskQueue((()=>{this.layout(this.width,this.height,!0)})),Disposable.from((()=>{var i;null===(i=this.element.parentElement)||void 0===i||i.removeChild(this.element)})),this.gridview.onDidChange((()=>{this._bufferOnDidLayoutChange.fire()})),Event.any(this.onDidAdd,this.onDidRemove,this.onDidActiveChange)((()=>{this._bufferOnDidLayoutChange.fire()})),this._onDidMaximizedChange,this._onDidViewVisibilityChangeMicroTaskQueue,this._bufferOnDidLayoutChange)}setVisible(i,e){this.gridview.setViewVisible(getGridLocation(i.element),e),this._bufferOnDidLayoutChange.fire()}isVisible(i){return this.gridview.isViewVisible(getGridLocation(i.element))}updateOptions(i){var e,t,s,o;i.proportionalLayout,i.orientation&&(this.gridview.orientation=i.orientation),"disableResizing"in i&&(this.disableResizing=null!==(e=i.disableAutoResizing)&&void 0!==e&&e),"locked"in i&&(this.locked=null!==(t=i.locked)&&void 0!==t&&t),"margin"in i&&(this.gridview.margin=null!==(s=i.margin)&&void 0!==s?s:0),"className"in i&&this._classNames.setClassNames(null!==(o=i.className)&&void 0!==o?o:"")}maximizeGroup(i){this.gridview.maximizeView(i),this.doSetGroupActive(i)}isMaximizedGroup(i){return this.gridview.maximizedView()===i}exitMaximizedGroup(){this.gridview.exitMaximizedView()}hasMaximizedGroup(){return this.gridview.hasMaximizedView()}doAddGroup(i,e=[0],t){this.gridview.addView(i,null!=t?t:Sizing.Distribute,e),this._onDidAdd.fire(i)}doRemoveGroup(i,e){if(!this._groups.has(i.id))throw new Error("invalid operation");const t=this._groups.get(i.id),s=this.gridview.remove(i,Sizing.Distribute);if(t&&!(null==e?void 0:e.skipDispose)&&(t.disposable.dispose(),t.value.dispose(),this._groups.delete(i.id),this._onDidRemove.fire(i)),!(null==e?void 0:e.skipActive)&&this._activeGroup===i){const i=Array.from(this._groups.values());this.doSetGroupActive(i.length>0?i[0].value:void 0)}return s}getPanel(i){var e;return null===(e=this._groups.get(i))||void 0===e?void 0:e.value}doSetGroupActive(i){this._activeGroup!==i&&(this._activeGroup&&this._activeGroup.setActive(!1),i&&i.setActive(!0),this._activeGroup=i,this._onDidActiveChange.fire(i))}removeGroup(i){this.doRemoveGroup(i)}moveToNext(i){var e;if(i||(i={}),!i.group){if(!this.activeGroup)return;i.group=this.activeGroup}const t=getGridLocation(i.group.element),s=null===(e=this.gridview.next(t))||void 0===e?void 0:e.view;this.doSetGroupActive(s)}moveToPrevious(i){var e;if(i||(i={}),!i.group){if(!this.activeGroup)return;i.group=this.activeGroup}const t=getGridLocation(i.group.element),s=null===(e=this.gridview.previous(t))||void 0===e?void 0:e.view;this.doSetGroupActive(s)}layout(i,e,t){(t||i!==this.width||e!==this.height)&&(this.gridview.element.style.height=`${e}px`,this.gridview.element.style.width=`${i}px`,this.gridview.layout(i,e))}dispose(){this._onDidActiveChange.dispose(),this._onDidAdd.dispose(),this._onDidRemove.dispose();for(const i of this.groups)i.dispose();this.gridview.dispose(),super.dispose()}}
//# sourceMappingURL=/sm/9f68c9a3e4b862fd6ddfc1a1da8f3fa73d96637fd1a1858c8248d69c8cc1723e.map