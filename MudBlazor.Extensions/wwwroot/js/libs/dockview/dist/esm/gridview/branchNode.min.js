/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/gridview/branchNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Splitview,Orientation,LayoutPriority}from"../splitview/splitview";import{Emitter,Event}from"../events";import{LeafNode}from"./leafNode";import{CompositeDisposable,Disposable}from"../lifecycle";export class BranchNode extends CompositeDisposable{get width(){return this.orientation===Orientation.HORIZONTAL?this.size:this.orthogonalSize}get height(){return this.orientation===Orientation.HORIZONTAL?this.orthogonalSize:this.size}get minimumSize(){return 0===this.children.length?0:Math.max(...this.children.map(((i,e)=>this.splitview.isViewVisible(e)?i.minimumOrthogonalSize:0)))}get maximumSize(){return Math.min(...this.children.map(((i,e)=>this.splitview.isViewVisible(e)?i.maximumOrthogonalSize:Number.POSITIVE_INFINITY)))}get minimumOrthogonalSize(){return this.splitview.minimumSize}get maximumOrthogonalSize(){return this.splitview.maximumSize}get orthogonalSize(){return this._orthogonalSize}get size(){return this._size}get minimumWidth(){return this.orientation===Orientation.HORIZONTAL?this.minimumOrthogonalSize:this.minimumSize}get minimumHeight(){return this.orientation===Orientation.HORIZONTAL?this.minimumSize:this.minimumOrthogonalSize}get maximumWidth(){return this.orientation===Orientation.HORIZONTAL?this.maximumOrthogonalSize:this.maximumSize}get maximumHeight(){return this.orientation===Orientation.HORIZONTAL?this.maximumSize:this.maximumOrthogonalSize}get priority(){if(0===this.children.length)return LayoutPriority.Normal;const i=this.children.map((i=>void 0===i.priority?LayoutPriority.Normal:i.priority));return i.some((i=>i===LayoutPriority.High))?LayoutPriority.High:i.some((i=>i===LayoutPriority.Low))?LayoutPriority.Low:LayoutPriority.Normal}get disabled(){return this.splitview.disabled}set disabled(i){this.splitview.disabled=i}get margin(){return this.splitview.margin}set margin(i){this.splitview.margin=i,this.children.forEach((e=>{e instanceof BranchNode&&(e.margin=i)}))}constructor(i,e,t,s,n,h,r,o){if(super(),this.orientation=i,this.proportionalLayout=e,this.styles=t,this._childrenDisposable=Disposable.NONE,this.children=[],this._onDidChange=new Emitter,this.onDidChange=this._onDidChange.event,this._onDidVisibilityChange=new Emitter,this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._orthogonalSize=n,this._size=s,this.element=document.createElement("div"),this.element.className="dv-branch-node",o){const i={views:o.map((i=>({view:i.node,size:i.node.size,visible:!(i.node instanceof LeafNode&&void 0!==i.visible)||i.visible}))),size:this.orthogonalSize};this.children=o.map((i=>i.node)),this.splitview=new Splitview(this.element,{orientation:this.orientation,descriptor:i,proportionalLayout:e,styles:t,margin:r})}else this.splitview=new Splitview(this.element,{orientation:this.orientation,proportionalLayout:e,styles:t,margin:r}),this.splitview.layout(this.size,this.orthogonalSize);this.disabled=h,this.addDisposables(this._onDidChange,this._onDidVisibilityChange,this.splitview.onDidSashEnd((()=>{this._onDidChange.fire({})}))),this.setupChildrenEvents()}setVisible(i){}isChildVisible(i){if(i<0||i>=this.children.length)throw new Error("Invalid index");return this.splitview.isViewVisible(i)}setChildVisible(i,e){if(i<0||i>=this.children.length)throw new Error("Invalid index");if(this.splitview.isViewVisible(i)===e)return;const t=0===this.splitview.contentSize;this.splitview.setViewVisible(i,e);const s=0===this.splitview.contentSize;(e&&t||!e&&s)&&this._onDidVisibilityChange.fire({visible:e})}moveChild(i,e){if(i===e)return;if(i<0||i>=this.children.length)throw new Error("Invalid from index");i<e&&e--,this.splitview.moveView(i,e);const t=this._removeChild(i);this._addChild(t,e)}getChildSize(i){if(i<0||i>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewSize(i)}resizeChild(i,e){if(i<0||i>=this.children.length)throw new Error("Invalid index");this.splitview.resizeView(i,e)}layout(i,e){this._size=e,this._orthogonalSize=i,this.splitview.layout(e,i)}addChild(i,e,t,s){if(t<0||t>this.children.length)throw new Error("Invalid index");this.splitview.addView(i,e,t,s),this._addChild(i,t)}getChildCachedVisibleSize(i){if(i<0||i>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewCachedVisibleSize(i)}removeChild(i,e){if(i<0||i>=this.children.length)throw new Error("Invalid index");return this.splitview.removeView(i,e),this._removeChild(i)}_addChild(i,e){this.children.splice(e,0,i),this.setupChildrenEvents()}_removeChild(i){const[e]=this.children.splice(i,1);return this.setupChildrenEvents(),e}setupChildrenEvents(){this._childrenDisposable.dispose(),this._childrenDisposable=new CompositeDisposable(Event.any(...this.children.map((i=>i.onDidChange)))((i=>{this._onDidChange.fire({size:i.orthogonalSize})})),...this.children.map(((i,e)=>i instanceof BranchNode?i.onDidVisibilityChange((({visible:i})=>{this.setChildVisible(e,i)})):Disposable.NONE)))}dispose(){this._childrenDisposable.dispose(),this.splitview.dispose(),this.children.forEach((i=>i.dispose())),super.dispose()}}
//# sourceMappingURL=/sm/02bcd658c9da36fa838b4902164ee3a284d796ef67329ec19e58e6351344dd10.map