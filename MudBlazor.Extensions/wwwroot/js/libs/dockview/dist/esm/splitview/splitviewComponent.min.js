/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/esm/splitview/splitviewComponent.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{CompositeDisposable,MutableDisposable}from"../lifecycle";import{Orientation,Sizing,Splitview}from"./splitview";import{Emitter}from"../events";import{Resizable}from"../resizable";import{Classnames}from"../dom";export class SplitviewComponent extends Resizable{get panels(){return this.splitview.getViews()}get options(){return this._options}get length(){return this._panels.size}get orientation(){return this.splitview.orientation}get splitview(){return this._splitview}set splitview(i){this._splitview&&this._splitview.dispose(),this._splitview=i,this._splitviewChangeDisposable.value=new CompositeDisposable(this._splitview.onDidSashEnd((()=>{this._onDidLayoutChange.fire(void 0)})),this._splitview.onDidAddView((i=>this._onDidAddView.fire(i))),this._splitview.onDidRemoveView((i=>this._onDidRemoveView.fire(i))))}get minimumSize(){return this.splitview.minimumSize}get maximumSize(){return this.splitview.maximumSize}get height(){return this.splitview.orientation===Orientation.HORIZONTAL?this.splitview.orthogonalSize:this.splitview.size}get width(){return this.splitview.orientation===Orientation.HORIZONTAL?this.splitview.size:this.splitview.orthogonalSize}constructor(i,e){var t;super(document.createElement("div"),e.disableAutoResizing),this._splitviewChangeDisposable=new MutableDisposable,this._panels=new Map,this._onDidLayoutfromJSON=new Emitter,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidAddView=new Emitter,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new Emitter,this.onDidRemoveView=this._onDidRemoveView.event,this._onDidLayoutChange=new Emitter,this.onDidLayoutChange=this._onDidLayoutChange.event,this.element.style.height="100%",this.element.style.width="100%",this._classNames=new Classnames(this.element),this._classNames.setClassNames(null!==(t=e.className)&&void 0!==t?t:""),i.appendChild(this.element),this._options=e,this.splitview=new Splitview(this.element,e),this.addDisposables(this._onDidAddView,this._onDidLayoutfromJSON,this._onDidRemoveView,this._onDidLayoutChange)}updateOptions(i){var e,t;"className"in i&&this._classNames.setClassNames(null!==(e=i.className)&&void 0!==e?e:""),"disableResizing"in i&&(this.disableResizing=null!==(t=i.disableAutoResizing)&&void 0!==t&&t),"string"==typeof i.orientation&&(this.splitview.orientation=i.orientation),this._options=Object.assign(Object.assign({},this.options),i),this.splitview.layout(this.splitview.size,this.splitview.orthogonalSize)}focus(){var i;null===(i=this._activePanel)||void 0===i||i.focus()}movePanel(i,e){this.splitview.moveView(i,e)}setVisible(i,e){const t=this.panels.indexOf(i);this.splitview.setViewVisible(t,e)}setActive(i,e){this._activePanel=i,this.panels.filter((e=>e!==i)).forEach((i=>{i.api._onDidActiveChange.fire({isActive:!1}),e||i.focus()})),i.api._onDidActiveChange.fire({isActive:!0}),e||i.focus()}removePanel(i,e){const t=this._panels.get(i.id);if(!t)throw new Error(`unknown splitview panel ${i.id}`);t.dispose(),this._panels.delete(i.id);const s=this.panels.findIndex((e=>e===i));this.splitview.removeView(s,e).dispose();const o=this.panels;o.length>0&&this.setActive(o[o.length-1])}getPanel(i){return this.panels.find((e=>e.id===i))}addPanel(i){var e;if(this._panels.has(i.id))throw new Error(`panel ${i.id} already exists`);const t=this.options.createComponent({id:i.id,name:i.component});t.orientation=this.splitview.orientation,t.init({params:null!==(e=i.params)&&void 0!==e?e:{},minimumSize:i.minimumSize,maximumSize:i.maximumSize,snap:i.snap,priority:i.priority,accessor:this});const s="number"==typeof i.size?i.size:Sizing.Distribute,o="number"==typeof i.index?i.index:void 0;return this.splitview.addView(t,s,o),this.doAddView(t),this.setActive(t),t}layout(i,e){const[t,s]=this.splitview.orientation===Orientation.HORIZONTAL?[i,e]:[e,i];this.splitview.layout(t,s)}doAddView(i){const e=i.api.onDidFocusChange((e=>{e.isFocused&&this.setActive(i,!0)}));this._panels.set(i.id,e)}toJSON(){var i;return{views:this.splitview.getViews().map(((i,e)=>({size:this.splitview.getViewSize(e),data:i.toJSON(),snap:!!i.snap,priority:i.priority}))),activeView:null===(i=this._activePanel)||void 0===i?void 0:i.id,size:this.splitview.size,orientation:this.splitview.orientation}}fromJSON(i){this.clear();const{views:e,orientation:t,size:s,activeView:o}=i,n=[],a=this.width,l=this.height;if(this.splitview=new Splitview(this.element,{orientation:t,proportionalLayout:this.options.proportionalLayout,descriptor:{size:s,views:e.map((i=>{const e=i.data;if(this._panels.has(e.id))throw new Error(`panel ${e.id} already exists`);const s=this.options.createComponent({id:e.id,name:e.component});return n.push((()=>{var t;s.init({params:null!==(t=e.params)&&void 0!==t?t:{},minimumSize:e.minimumSize,maximumSize:e.maximumSize,snap:i.snap,priority:i.priority,accessor:this})})),s.orientation=t,this.doAddView(s),setTimeout((()=>{this._onDidAddView.fire(s)}),0),{size:i.size,view:s}}))}}),this.layout(a,l),n.forEach((i=>i())),"string"==typeof o){const i=this.getPanel(o);i&&this.setActive(i)}this._onDidLayoutfromJSON.fire()}clear(){for(const i of this._panels.values())i.dispose();for(this._panels.clear();this.splitview.length>0;){this.splitview.removeView(0,Sizing.Distribute,!0).dispose()}}dispose(){for(const i of this._panels.values())i.dispose();this._panels.clear();const i=this.splitview.getViews();this._splitviewChangeDisposable.dispose(),this.splitview.dispose();for(const e of i)e.dispose();this.element.remove(),super.dispose()}}
//# sourceMappingURL=/sm/c9807c84e66dbae04b3b61a90daf33f73010658e117de645a1df4f838ec9c469.map