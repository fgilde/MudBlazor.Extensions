/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/cjs/dockview/components/titlebar/tabsContainer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TabsContainer=void 0;var lifecycle_1=require("../../../lifecycle"),events_1=require("../../../events"),voidContainer_1=require("./voidContainer"),dom_1=require("../../../dom"),events_2=require("../../events"),dataTransfer_1=require("../../../dnd/dataTransfer"),tabs_1=require("./tabs"),tabOverflowControl_1=require("./tabOverflowControl"),TabsContainer=function(e){function t(t,n){var o=e.call(this)||this;return o.accessor=t,o.group=n,o._hidden=!1,o.dropdownPart=null,o._overflowTabs=[],o._dropdownDisposable=new lifecycle_1.MutableDisposable,o._onDrop=new events_1.Emitter,o.onDrop=o._onDrop.event,o._onGroupDragStart=new events_1.Emitter,o.onGroupDragStart=o._onGroupDragStart.event,o._onWillShowOverlay=new events_1.Emitter,o.onWillShowOverlay=o._onWillShowOverlay.event,o._element=document.createElement("div"),o._element.className="dv-tabs-and-actions-container",(0,dom_1.toggleClass)(o._element,"dv-full-width-single-tab","fullwidth"===o.accessor.options.singleTabMode),o.rightActionsContainer=document.createElement("div"),o.rightActionsContainer.className="dv-right-actions-container",o.leftActionsContainer=document.createElement("div"),o.leftActionsContainer.className="dv-left-actions-container",o.preActionsContainer=document.createElement("div"),o.preActionsContainer.className="dv-pre-actions-container",o.tabs=new tabs_1.Tabs(n,t,{showTabsOverflowControl:!t.options.disableTabsOverflowList}),o.voidContainer=new voidContainer_1.VoidContainer(o.accessor,o.group),o._element.appendChild(o.preActionsContainer),o._element.appendChild(o.tabs.element),o._element.appendChild(o.leftActionsContainer),o._element.appendChild(o.voidContainer.element),o._element.appendChild(o.rightActionsContainer),o.addDisposables(o.tabs.onDrop((function(e){return o._onDrop.fire(e)})),o.tabs.onWillShowOverlay((function(e){return o._onWillShowOverlay.fire(e)})),t.onDidOptionsChange((function(){o.tabs.showTabsOverflowControl=!t.options.disableTabsOverflowList})),o.tabs.onOverflowTabsChange((function(e){o.toggleDropdown(e)})),o.tabs,o._onWillShowOverlay,o._onDrop,o._onGroupDragStart,o.voidContainer,o.voidContainer.onDragStart((function(e){o._onGroupDragStart.fire({nativeEvent:e,group:o.group})})),o.voidContainer.onDrop((function(e){o._onDrop.fire({event:e.nativeEvent,index:o.tabs.size})})),o.voidContainer.onWillShowOverlay((function(e){o._onWillShowOverlay.fire(new events_2.WillShowOverlayLocationEvent(e,{kind:"header_space",panel:o.group.activePanel,api:o.accessor.api,group:o.group,getData:dataTransfer_1.getPanelData}))})),(0,events_1.addDisposableListener)(o.voidContainer.element,"pointerdown",(function(e){if(!e.defaultPrevented&&(!o.accessor.options.disableFloatingGroups&&e.shiftKey&&"floating"!==o.group.api.location.type)){e.preventDefault();var t=o.element.getBoundingClientRect(),n=t.top,i=t.left,r=o.accessor.element.getBoundingClientRect(),a=r.top,s=r.left;o.accessor.addFloatingGroup(o.group,{x:i-s+20,y:n-a+20,inDragMode:!0})}}))),o}return __extends(t,e),Object.defineProperty(t.prototype,"onTabDragStart",{get:function(){return this.tabs.onTabDragStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panels",{get:function(){return this.tabs.panels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.tabs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden=e,this.element.style.display=e?"none":""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.hidden||(this.element.style.display="")},t.prototype.hide=function(){this._element.style.display="none"},t.prototype.setRightActionsElement=function(e){this.rightActions!==e&&(this.rightActions&&(this.rightActions.remove(),this.rightActions=void 0),e&&(this.rightActionsContainer.appendChild(e),this.rightActions=e))},t.prototype.setLeftActionsElement=function(e){this.leftActions!==e&&(this.leftActions&&(this.leftActions.remove(),this.leftActions=void 0),e&&(this.leftActionsContainer.appendChild(e),this.leftActions=e))},t.prototype.setPrefixActionsElement=function(e){this.preActions!==e&&(this.preActions&&(this.preActions.remove(),this.preActions=void 0),e&&(this.preActionsContainer.appendChild(e),this.preActions=e))},t.prototype.isActive=function(e){return this.tabs.isActive(e)},t.prototype.indexOf=function(e){return this.tabs.indexOf(e)},t.prototype.setActive=function(e){},t.prototype.delete=function(e){this.tabs.delete(e),this.updateClassnames()},t.prototype.setActivePanel=function(e){this.tabs.setActivePanel(e)},t.prototype.openPanel=function(e,t){void 0===t&&(t=this.tabs.size),this.tabs.openPanel(e,t),this.updateClassnames()},t.prototype.closePanel=function(e){this.delete(e.id)},t.prototype.updateClassnames=function(){(0,dom_1.toggleClass)(this._element,"dv-single-tab",1===this.size)},t.prototype.toggleDropdown=function(e){var t=this,n=e.reset?[]:e.tabs;if(this._overflowTabs=n,this._overflowTabs.length>0&&this.dropdownPart)this.dropdownPart.update({tabs:n.length});else if(0!==this._overflowTabs.length){var o=document.createElement("div");o.className="dv-tabs-overflow-dropdown-root";var i=(0,tabOverflowControl_1.createDropdownElementHandle)();i.update({tabs:n.length}),this.dropdownPart=i,o.appendChild(i.element),this.rightActionsContainer.prepend(o),this._dropdownDisposable.value=new lifecycle_1.CompositeDisposable(lifecycle_1.Disposable.from((function(){var e,n;o.remove(),null===(n=null===(e=t.dropdownPart)||void 0===e?void 0:e.dispose)||void 0===n||n.call(e),t.dropdownPart=null})),(0,events_1.addDisposableListener)(o,"pointerdown",(function(e){e.preventDefault()}),{capture:!0}),(0,events_1.addDisposableListener)(o,"click",(function(e){var n,i,r=document.createElement("div");r.style.overflow="auto",r.className="dv-tabs-overflow-container";var a=function(e){var n=t.group.panels.find((function(t){return t===e.panel})),o=n.view.createTabRenderer("headerOverflow").element,i=document.createElement("div");(0,dom_1.toggleClass)(i,"dv-tab",!0),(0,dom_1.toggleClass)(i,"dv-active-tab",n.api.isActive),(0,dom_1.toggleClass)(i,"dv-inactive-tab",!n.api.isActive),i.addEventListener("click",(function(n){t.accessor.popupService.close(),n.defaultPrevented||(e.element.scrollIntoView(),e.panel.api.setActive())})),i.appendChild(o),r.appendChild(i)};try{for(var s=__values(t.tabs.tabs.filter((function(e){return t._overflowTabs.includes(e.panel.id)}))),l=s.next();!l.done;l=s.next()){a(l.value)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}var p=(0,dom_1.findRelativeZIndexParent)(o);t.accessor.popupService.openPopover(r,{x:e.clientX,y:e.clientY,zIndex:(null==p?void 0:p.style.zIndex)?"calc(".concat(p.style.zIndex," * 2)"):void 0})})))}else this._dropdownDisposable.dispose()},t.prototype.updateDragAndDropState=function(){this.tabs.updateDragAndDropState(),this.voidContainer.updateDragAndDropState()},t}(lifecycle_1.CompositeDisposable);exports.TabsContainer=TabsContainer;
//# sourceMappingURL=/sm/cb75fa7fcf5d37a1079a3de3e0c6ca99f280380193c40f7c9871611b983ab135.map