/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/cjs/dockview/components/titlebar/tabs.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},__spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tabs=void 0;var dataTransfer_1=require("../../../dnd/dataTransfer"),dom_1=require("../../../dom"),events_1=require("../../../events"),lifecycle_1=require("../../../lifecycle"),scrollbar_1=require("../../../scrollbar"),events_2=require("../../events"),tab_1=require("../tab/tab"),Tabs=function(e){function t(t,r,n){var o=e.call(this)||this;if(o.group=t,o.accessor=r,o._observerDisposable=new lifecycle_1.MutableDisposable,o._tabs=[],o.selectedIndex=-1,o._showTabsOverflowControl=!1,o._onTabDragStart=new events_1.Emitter,o.onTabDragStart=o._onTabDragStart.event,o._onDrop=new events_1.Emitter,o.onDrop=o._onDrop.event,o._onWillShowOverlay=new events_1.Emitter,o.onWillShowOverlay=o._onWillShowOverlay.event,o._onOverflowTabsChange=new events_1.Emitter,o.onOverflowTabsChange=o._onOverflowTabsChange.event,o._tabsList=document.createElement("div"),o._tabsList.className="dv-tabs-container dv-horizontal",o.showTabsOverflowControl=n.showTabsOverflowControl,"native"===r.options.scrollbars)o._element=o._tabsList;else{var a=new scrollbar_1.Scrollbar(o._tabsList);o._element=a.element,o.addDisposables(a)}return o.addDisposables(o._onOverflowTabsChange,o._observerDisposable,o._onWillShowOverlay,o._onDrop,o._onTabDragStart,(0,events_1.addDisposableListener)(o.element,"pointerdown",(function(e){e.defaultPrevented||0===e.button&&o.accessor.doSetGroupActive(o.group)})),lifecycle_1.Disposable.from((function(){var e,t;try{for(var r=__values(o._tabs),n=r.next();!n.done;n=r.next()){var a=n.value,i=a.value;a.disposable.dispose(),i.dispose()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}o._tabs=[]}))),o}return __extends(t,e),Object.defineProperty(t.prototype,"showTabsOverflowControl",{get:function(){return this._showTabsOverflowControl},set:function(e){var t=this;if(this._showTabsOverflowControl!=e&&(this._showTabsOverflowControl=e,e)){var r=new dom_1.OverflowObserver(this._tabsList);this._observerDisposable.value=new lifecycle_1.CompositeDisposable(r,r.onDidChange((function(e){var r=e.hasScrollX||e.hasScrollY;t.toggleDropdown({reset:!r})})),(0,events_1.addDisposableListener)(this._tabsList,"scroll",(function(){t.toggleDropdown({reset:!1})})))}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panels",{get:function(){return this._tabs.map((function(e){return e.value.panel.id}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._tabs.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabs",{get:function(){return this._tabs.map((function(e){return e.value}))},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return this._tabs.findIndex((function(t){return t.value.panel.id===e}))},t.prototype.isActive=function(e){return this.selectedIndex>-1&&this._tabs[this.selectedIndex].value===e},t.prototype.setActivePanel=function(e){var t,r,n=0;try{for(var o=__values(this._tabs),a=o.next();!a.done;a=o.next()){var i=a.value,s=e.id===i.value.panel.id;if(i.value.setActive(s),s){var l=i.value.element,c=l.parentElement;(n<c.scrollLeft||n+l.clientWidth>c.scrollLeft+c.clientWidth)&&(c.scrollLeft=n)}n+=i.value.element.clientWidth}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},t.prototype.openPanel=function(e,t){var r=this;if(void 0===t&&(t=this._tabs.length),!this._tabs.find((function(t){return t.value.panel.id===e.id}))){var n=new tab_1.Tab(e,this.accessor,this.group);n.setContent(e.view.tab);var o=new lifecycle_1.CompositeDisposable(n.onDragStart((function(t){r._onTabDragStart.fire({nativeEvent:t,panel:e})})),n.onPointerDown((function(t){if(!t.defaultPrevented){var o=!r.accessor.options.disableFloatingGroups,a="floating"===r.group.api.location.type&&1===r.size;if(o&&!a&&t.shiftKey){t.preventDefault();var i=r.accessor.getGroupPanel(n.panel.id),s=n.element.getBoundingClientRect(),l=s.top,c=s.left,u=r.accessor.element.getBoundingClientRect(),f=u.top,p=u.left;r.accessor.addFloatingGroup(i,{x:c-p,y:l-f,inDragMode:!0})}else if(0===t.button)r.group.activePanel!==e&&r.group.model.openPanel(e)}})),n.onDrop((function(e){r._onDrop.fire({event:e.nativeEvent,index:r._tabs.findIndex((function(e){return e.value===n}))})})),n.onWillShowOverlay((function(e){r._onWillShowOverlay.fire(new events_2.WillShowOverlayLocationEvent(e,{kind:"tab",panel:r.group.activePanel,api:r.accessor.api,group:r.group,getData:dataTransfer_1.getPanelData}))}))),a={value:n,disposable:o};this.addTab(a,t)}},t.prototype.delete=function(e){var t=this.indexOf(e),r=this._tabs.splice(t,1)[0],n=r.value;r.disposable.dispose(),n.dispose(),n.element.remove()},t.prototype.addTab=function(e,t){if(void 0===t&&(t=this._tabs.length),t<0||t>this._tabs.length)throw new Error("invalid location");this._tabsList.insertBefore(e.value.element,this._tabsList.children[t]),this._tabs=__spreadArray(__spreadArray(__spreadArray([],__read(this._tabs.slice(0,t)),!1),[e],!1),__read(this._tabs.slice(t)),!1),this.selectedIndex<0&&(this.selectedIndex=t)},t.prototype.toggleDropdown=function(e){var t=this,r=e.reset?[]:this._tabs.filter((function(e){return!(0,dom_1.isChildEntirelyVisibleWithinParent)(e.value.element,t._tabsList)})).map((function(e){return e.value.panel.id}));this._onOverflowTabsChange.fire({tabs:r,reset:e.reset})},t.prototype.updateDragAndDropState=function(){var e,t;try{for(var r=__values(this._tabs),n=r.next();!n.done;n=r.next()){n.value.value.updateDragAndDropState()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t}(lifecycle_1.CompositeDisposable);exports.Tabs=Tabs;
//# sourceMappingURL=/sm/44fa8850bd2f2c3dd6b64c0102b6bff22a569d630fba8110a44f628d1413d40d.map