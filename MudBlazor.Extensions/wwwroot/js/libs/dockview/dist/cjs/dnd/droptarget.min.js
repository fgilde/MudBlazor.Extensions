/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/cjs/dnd/droptarget.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateQuadrantAsPixels=exports.calculateQuadrantAsPercentage=exports.Droptarget=exports.positionToDirection=exports.directionToPosition=exports.WillShowOverlayEvent=void 0;var dom_1=require("../dom"),events_1=require("../events"),lifecycle_1=require("../lifecycle"),dnd_1=require("./dnd"),math_1=require("../math");function setGPUOptimizedBounds(t,e){var o=e.top,r=e.left,n=e.width,a=e.height,i="".concat(Math.round(o),"px"),l="".concat(Math.round(r),"px"),s="".concat(Math.round(n),"px"),c="".concat(Math.round(a),"px");t.style.top=i,t.style.left=l,t.style.width=s,t.style.height=c,t.style.visibility="visible",t.style.transform&&""!==t.style.transform||(t.style.transform="translate3d(0, 0, 0)")}function setGPUOptimizedBoundsFromStrings(t,e){var o=e.top,r=e.left,n=e.width,a=e.height;t.style.top=o,t.style.left=r,t.style.width=n,t.style.height=a,t.style.visibility="visible",t.style.transform&&""!==t.style.transform||(t.style.transform="translate3d(0, 0, 0)")}function checkBoundsChanged(t,e){var o=e.top,r=e.left,n=e.width,a=e.height,i="".concat(Math.round(o),"px"),l="".concat(Math.round(r),"px"),s="".concat(Math.round(n),"px"),c="".concat(Math.round(a),"px");return t.style.top!==i||t.style.left!==l||t.style.width!==s||t.style.height!==c}var WillShowOverlayEvent=function(t){function e(e){var o=t.call(this)||this;return o.options=e,o}return __extends(e,t),Object.defineProperty(e.prototype,"nativeEvent",{get:function(){return this.options.nativeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.options.position},enumerable:!1,configurable:!0}),e}(events_1.DockviewEvent);function directionToPosition(t){switch(t){case"above":return"top";case"below":return"bottom";case"left":return"left";case"right":return"right";case"within":return"center";default:throw new Error("invalid direction '".concat(t,"'"))}}function positionToDirection(t){switch(t){case"top":return"above";case"bottom":return"below";case"left":return"left";case"right":return"right";case"center":return"within";default:throw new Error("invalid position '".concat(t,"'"))}}exports.WillShowOverlayEvent=WillShowOverlayEvent,exports.directionToPosition=directionToPosition,exports.positionToDirection=positionToDirection;var DEFAULT_ACTIVATION_SIZE={value:20,type:"percentage"},DEFAULT_SIZE={value:50,type:"percentage"},SMALL_WIDTH_BOUNDARY=100,SMALL_HEIGHT_BOUNDARY=100,Droptarget=function(t){function e(o,r){var n=t.call(this)||this;return n.element=o,n.options=r,n._onDrop=new events_1.Emitter,n.onDrop=n._onDrop.event,n._onWillShowOverlay=new events_1.Emitter,n.onWillShowOverlay=n._onWillShowOverlay.event,n._disabled=!1,n._acceptedTargetZonesSet=new Set(n.options.acceptedTargetZones),n.dnd=new dnd_1.DragAndDropObserver(n.element,{onDragEnter:function(){var t,e,o;null===(o=null===(e=(t=n.options).getOverrideTarget)||void 0===e?void 0:e.call(t))||void 0===o||o.getElements()},onDragOver:function(t){var o,r,a,i,l,s,c;e.ACTUAL_TARGET=n;var d=null===(r=(o=n.options).getOverrideTarget)||void 0===r?void 0:r.call(o);if(0!==n._acceptedTargetZonesSet.size){var p=null!==(l=null===(i=(a=n.options).getOverlayOutline)||void 0===i?void 0:i.call(a))&&void 0!==l?l:n.element,v=p.offsetWidth,u=p.offsetHeight;if(0!==v&&0!==u){var g=t.currentTarget.getBoundingClientRect(),h=(null!==(s=t.clientX)&&void 0!==s?s:0)-g.left,f=(null!==(c=t.clientY)&&void 0!==c?c:0)-g.top,m=n.calculateQuadrant(n._acceptedTargetZonesSet,h,f,v,u);if(n.isAlreadyUsed(t)||null===m)n.removeDropTarget();else if(n.options.canDisplayOverlay(t,m)){var _=new WillShowOverlayEvent({nativeEvent:t,position:m});n._onWillShowOverlay.fire(_),_.defaultPrevented?n.removeDropTarget():(n.markAsUsed(t),d||n.targetElement||(n.targetElement=document.createElement("div"),n.targetElement.className="dv-drop-target-dropzone",n.overlayElement=document.createElement("div"),n.overlayElement.className="dv-drop-target-selection",n._state="center",n.targetElement.appendChild(n.overlayElement),p.classList.add("dv-drop-target"),p.append(n.targetElement)),n.toggleClasses(m,v,u),n._state=m)}else{if(d)return;n.removeDropTarget()}}}else{if(d)return;n.removeDropTarget()}},onDragLeave:function(){var t,e;(null===(e=(t=n.options).getOverrideTarget)||void 0===e?void 0:e.call(t))||n.removeDropTarget()},onDragEnd:function(t){var o,r,a=null===(r=(o=n.options).getOverrideTarget)||void 0===r?void 0:r.call(o);a&&e.ACTUAL_TARGET===n&&n._state&&(t.stopPropagation(),n._onDrop.fire({position:n._state,nativeEvent:t})),n.removeDropTarget(),null==a||a.clear()},onDrop:function(t){var e,o,r;t.preventDefault();var a=n._state;n.removeDropTarget(),null===(r=null===(o=(e=n.options).getOverrideTarget)||void 0===o?void 0:o.call(e))||void 0===r||r.clear(),a&&(t.stopPropagation(),n._onDrop.fire({position:a,nativeEvent:t}))}}),n.addDisposables(n._onDrop,n._onWillShowOverlay,n.dnd),n}return __extends(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.setTargetZones=function(t){this._acceptedTargetZonesSet=new Set(t)},e.prototype.setOverlayModel=function(t){this.options.overlayModel=t},e.prototype.dispose=function(){this.removeDropTarget(),t.prototype.dispose.call(this)},e.prototype.markAsUsed=function(t){t[e.USED_EVENT_ID]=!0},e.prototype.isAlreadyUsed=function(t){var o=t[e.USED_EVENT_ID];return"boolean"==typeof o&&o},e.prototype.toggleClasses=function(t,e,o){var r,n,a,i,l,s,c,d=null===(n=(r=this.options).getOverrideTarget)||void 0===n?void 0:n.call(r);if(d||this.overlayElement){var p=e<SMALL_WIDTH_BOUNDARY,v=o<SMALL_HEIGHT_BOUNDARY,u="left"===t,g="right"===t,h="top"===t,f="bottom"===t,m=!p&&g,_=!p&&u,y=!v&&h,E=!v&&f,T=1,D=null!==(i=null===(a=this.options.overlayModel)||void 0===a?void 0:a.size)&&void 0!==i?i:DEFAULT_SIZE;if("percentage"===D.type?T=(0,math_1.clamp)(D.value,0,100)/100:((m||_)&&(T=(0,math_1.clamp)(0,D.value,e)/e),(y||E)&&(T=(0,math_1.clamp)(0,D.value,o)/o)),d){var w=null!==(c=null===(s=(l=this.options).getOverlayOutline)||void 0===s?void 0:s.call(l))&&void 0!==c?c:this.element,O=w.getBoundingClientRect(),b=d.getElements(void 0,w),A=b.root,x=b.overlay,S=A.getBoundingClientRect(),C=O.top-S.top,P=O.left-S.left,U={top:C,left:P,width:e,height:o};if(m?(U.left=P+e*(1-T),U.width=e*T):_?U.width=e*T:y?U.height=o*T:E&&(U.top=C+o*(1-T),U.height=o*T),p&&u&&(U.width=4),p&&g&&(U.left=P+e-4,U.width=4),!checkBoundsChanged(x,U))return;return setGPUOptimizedBounds(x,U),x.className="dv-drop-target-anchor".concat(this.options.className?" ".concat(this.options.className):""),(0,dom_1.toggleClass)(x,"dv-drop-target-left",u),(0,dom_1.toggleClass)(x,"dv-drop-target-right",g),(0,dom_1.toggleClass)(x,"dv-drop-target-top",h),(0,dom_1.toggleClass)(x,"dv-drop-target-bottom",f),(0,dom_1.toggleClass)(x,"dv-drop-target-center","center"===t),void(b.changed&&((0,dom_1.toggleClass)(x,"dv-drop-target-anchor-container-changed",!0),setTimeout((function(){(0,dom_1.toggleClass)(x,"dv-drop-target-anchor-container-changed",!1)}),10)))}if(this.overlayElement){var L={top:"0px",left:"0px",width:"100%",height:"100%"};m?(L.left="".concat(100*(1-T),"%"),L.width="".concat(100*T,"%")):_?L.width="".concat(100*T,"%"):y?L.height="".concat(100*T,"%"):E&&(L.top="".concat(100*(1-T),"%"),L.height="".concat(100*T,"%")),setGPUOptimizedBoundsFromStrings(this.overlayElement,L),(0,dom_1.toggleClass)(this.overlayElement,"dv-drop-target-small-vertical",v),(0,dom_1.toggleClass)(this.overlayElement,"dv-drop-target-small-horizontal",p),(0,dom_1.toggleClass)(this.overlayElement,"dv-drop-target-left",u),(0,dom_1.toggleClass)(this.overlayElement,"dv-drop-target-right",g),(0,dom_1.toggleClass)(this.overlayElement,"dv-drop-target-top",h),(0,dom_1.toggleClass)(this.overlayElement,"dv-drop-target-bottom",f),(0,dom_1.toggleClass)(this.overlayElement,"dv-drop-target-center","center"===t)}}},e.prototype.calculateQuadrant=function(t,e,o,r,n){var a,i,l=null!==(i=null===(a=this.options.overlayModel)||void 0===a?void 0:a.activationSize)&&void 0!==i?i:DEFAULT_ACTIVATION_SIZE;return"percentage"===l.type?calculateQuadrantAsPercentage(t,e,o,r,n,l.value):calculateQuadrantAsPixels(t,e,o,r,n,l.value)},e.prototype.removeDropTarget=function(){var t;this.targetElement&&(this._state=void 0,null===(t=this.targetElement.parentElement)||void 0===t||t.classList.remove("dv-drop-target"),this.targetElement.remove(),this.targetElement=void 0,this.overlayElement=void 0)},e.USED_EVENT_ID="__dockview_droptarget_event_is_used__",e}(lifecycle_1.CompositeDisposable);function calculateQuadrantAsPercentage(t,e,o,r,n,a){var i=100*e/r,l=100*o/n;return t.has("left")&&i<a?"left":t.has("right")&&i>100-a?"right":t.has("top")&&l<a?"top":t.has("bottom")&&l>100-a?"bottom":t.has("center")?"center":null}function calculateQuadrantAsPixels(t,e,o,r,n,a){return t.has("left")&&e<a?"left":t.has("right")&&e>r-a?"right":t.has("top")&&o<a?"top":t.has("bottom")&&o>n-a?"bottom":t.has("center")?"center":null}exports.Droptarget=Droptarget,exports.calculateQuadrantAsPercentage=calculateQuadrantAsPercentage,exports.calculateQuadrantAsPixels=calculateQuadrantAsPixels;
//# sourceMappingURL=/sm/317ef0db393f496cd4f10ba73229b1eff11b8fd8f1ecdc0de2c385b19b7cc6fa.map