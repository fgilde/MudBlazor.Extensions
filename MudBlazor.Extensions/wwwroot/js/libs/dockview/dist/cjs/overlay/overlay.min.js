/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/cjs/overlay/overlay.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},__assign.apply(this,arguments)},__read=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},__spreadArray=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Overlay=void 0;var dom_1=require("../dom"),events_1=require("../events"),lifecycle_1=require("../lifecycle"),math_1=require("../math"),AriaLevelTracker=function(){function t(){this._orderedList=[]}return t.prototype.push=function(t){this._orderedList=__spreadArray(__spreadArray([],__read(this._orderedList.filter((function(e){return e!==t}))),!1),[t],!1),this.update()},t.prototype.destroy=function(t){this._orderedList=this._orderedList.filter((function(e){return e!==t})),this.update()},t.prototype.update=function(){for(var t=0;t<this._orderedList.length;t++)this._orderedList[t].setAttribute("aria-level","".concat(t)),this._orderedList[t].style.zIndex="calc(var(--dv-overlay-z-index, 999) + ".concat(2*t,")")},t}(),arialLevelTracker=new AriaLevelTracker,Overlay=function(t){function e(e){var i=t.call(this)||this;return i.options=e,i._element=document.createElement("div"),i._onDidChange=new events_1.Emitter,i.onDidChange=i._onDidChange.event,i._onDidChangeEnd=new events_1.Emitter,i.onDidChangeEnd=i._onDidChangeEnd.event,i.addDisposables(i._onDidChange,i._onDidChangeEnd),i._element.className="dv-resize-container",i._isVisible=!0,i.setupResize("top"),i.setupResize("bottom"),i.setupResize("left"),i.setupResize("right"),i.setupResize("topleft"),i.setupResize("topright"),i.setupResize("bottomleft"),i.setupResize("bottomright"),i._element.appendChild(i.options.content),i.options.container.appendChild(i._element),i.setBounds(__assign(__assign(__assign(__assign({height:i.options.height,width:i.options.width},"top"in i.options&&{top:i.options.top}),"bottom"in i.options&&{bottom:i.options.bottom}),"left"in i.options&&{left:i.options.left}),"right"in i.options&&{right:i.options.right})),arialLevelTracker.push(i._element),i}return __extends(e,t),Object.defineProperty(e.prototype,"minimumInViewportWidth",{set:function(t){this.options.minimumInViewportWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minimumInViewportHeight",{set:function(t){this.options.minimumInViewportHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!1,configurable:!0}),e.prototype.setVisible=function(t){t!==this.isVisible&&(this._isVisible=t,(0,dom_1.toggleClass)(this.element,"dv-hidden",!this.isVisible))},e.prototype.bringToFront=function(){arialLevelTracker.push(this._element)},e.prototype.setBounds=function(t){void 0===t&&(t={}),"number"==typeof t.height&&(this._element.style.height="".concat(t.height,"px")),"number"==typeof t.width&&(this._element.style.width="".concat(t.width,"px")),"top"in t&&"number"==typeof t.top&&(this._element.style.top="".concat(t.top,"px"),this._element.style.bottom="auto",this.verticalAlignment="top"),"bottom"in t&&"number"==typeof t.bottom&&(this._element.style.bottom="".concat(t.bottom,"px"),this._element.style.top="auto",this.verticalAlignment="bottom"),"left"in t&&"number"==typeof t.left&&(this._element.style.left="".concat(t.left,"px"),this._element.style.right="auto",this.horiziontalAlignment="left"),"right"in t&&"number"==typeof t.right&&(this._element.style.right="".concat(t.right,"px"),this._element.style.left="auto",this.horiziontalAlignment="right");var e=this.options.container.getBoundingClientRect(),i=this._element.getBoundingClientRect(),n=Math.max(0,this.getMinimumWidth(i.width)),o=Math.max(0,this.getMinimumHeight(i.height));if("top"===this.verticalAlignment){var r=(0,math_1.clamp)(i.top-e.top,-o,Math.max(0,e.height-i.height+o));this._element.style.top="".concat(r,"px"),this._element.style.bottom="auto"}if("bottom"===this.verticalAlignment){var s=(0,math_1.clamp)(e.bottom-i.bottom,-o,Math.max(0,e.height-i.height+o));this._element.style.bottom="".concat(s,"px"),this._element.style.top="auto"}if("left"===this.horiziontalAlignment){var a=(0,math_1.clamp)(i.left-e.left,-n,Math.max(0,e.width-i.width+n));this._element.style.left="".concat(a,"px"),this._element.style.right="auto"}if("right"===this.horiziontalAlignment){var l=(0,math_1.clamp)(e.right-i.right,-n,Math.max(0,e.width-i.width+n));this._element.style.right="".concat(l,"px"),this._element.style.left="auto"}this._onDidChange.fire()},e.prototype.toJSON=function(){var t=this.options.container.getBoundingClientRect(),e=this._element.getBoundingClientRect(),i={};return"top"===this.verticalAlignment?i.top=parseFloat(this._element.style.top):"bottom"===this.verticalAlignment?i.bottom=parseFloat(this._element.style.bottom):i.top=e.top-t.top,"left"===this.horiziontalAlignment?i.left=parseFloat(this._element.style.left):"right"===this.horiziontalAlignment?i.right=parseFloat(this._element.style.right):i.left=e.left-t.left,i.width=e.width,i.height=e.height,i},e.prototype.setupDrag=function(t,e){var i=this;void 0===e&&(e={inDragMode:!1});var n=new lifecycle_1.MutableDisposable,o=function(){var t=null,e=(0,dom_1.disableIframePointEvents)();n.value=new lifecycle_1.CompositeDisposable({dispose:function(){e.release()}},(0,events_1.addDisposableListener)(window,"pointermove",(function(e){var n=i.options.container.getBoundingClientRect(),o=e.clientX-n.left,r=e.clientY-n.top;(0,dom_1.toggleClass)(i._element,"dv-resize-container-dragging",!0);var s=i._element.getBoundingClientRect();null===t&&(t={x:e.clientX-s.left,y:e.clientY-s.top});var a=Math.max(0,i.getMinimumWidth(s.width)),l=Math.max(0,i.getMinimumHeight(s.height)),h=(0,math_1.clamp)(r-t.y,-l,Math.max(0,n.height-s.height+l)),p=(0,math_1.clamp)(t.y-r+n.height-s.height,-l,Math.max(0,n.height-s.height+l)),m=(0,math_1.clamp)(o-t.x,-a,Math.max(0,n.width-s.width+a)),d=(0,math_1.clamp)(t.x-o+n.width-s.width,-a,Math.max(0,n.width-s.width+a)),c={};h<=p?c.top=h:c.bottom=p,m<=d?c.left=m:c.right=d,i.setBounds(c)})),(0,events_1.addDisposableListener)(window,"pointerup",(function(){(0,dom_1.toggleClass)(i._element,"dv-resize-container-dragging",!1),n.dispose(),i._onDidChangeEnd.fire()})))};this.addDisposables(n,(0,events_1.addDisposableListener)(t,"pointerdown",(function(t){t.defaultPrevented?t.preventDefault():(0,dom_1.quasiDefaultPrevented)(t)||o()})),(0,events_1.addDisposableListener)(this.options.content,"pointerdown",(function(t){t.defaultPrevented||(0,dom_1.quasiDefaultPrevented)(t)||t.shiftKey&&o()})),(0,events_1.addDisposableListener)(this.options.content,"pointerdown",(function(){arialLevelTracker.push(i._element)}),!0)),e.inDragMode&&o()},e.prototype.setupResize=function(t){var i=this,n=document.createElement("div");n.className="dv-resize-handle-".concat(t),this._element.appendChild(n);var o=new lifecycle_1.MutableDisposable;this.addDisposables(o,(0,events_1.addDisposableListener)(n,"pointerdown",(function(n){n.preventDefault();var r=null,s=(0,dom_1.disableIframePointEvents)();o.value=new lifecycle_1.CompositeDisposable((0,events_1.addDisposableListener)(window,"pointermove",(function(n){var o=i.options.container.getBoundingClientRect(),s=i._element.getBoundingClientRect(),a=n.clientY-o.top,l=n.clientX-o.left;null===r&&(r={originalY:a,originalHeight:s.height,originalX:l,originalWidth:s.width});var h=void 0,p=void 0,m=void 0,d=void 0,c=void 0,u=void 0,g=function(){h=(0,math_1.clamp)(a,-Number.MAX_VALUE,r.originalY+r.originalHeight>o.height?i.getMinimumHeight(o.height):Math.max(0,r.originalY+r.originalHeight-e.MINIMUM_HEIGHT)),m=r.originalY+r.originalHeight-h,p=o.height-h-m},_=function(){h=r.originalY-r.originalHeight,m=(0,math_1.clamp)(a-h,h<0&&"number"==typeof i.options.minimumInViewportHeight?-h+i.options.minimumInViewportHeight:e.MINIMUM_HEIGHT,Number.MAX_VALUE),p=o.height-h-m},f=function(){d=(0,math_1.clamp)(l,-Number.MAX_VALUE,r.originalX+r.originalWidth>o.width?i.getMinimumWidth(o.width):Math.max(0,r.originalX+r.originalWidth-e.MINIMUM_WIDTH)),u=r.originalX+r.originalWidth-d,c=o.width-d-u},y=function(){d=r.originalX-r.originalWidth,u=(0,math_1.clamp)(l-d,d<0&&"number"==typeof i.options.minimumInViewportWidth?-d+i.options.minimumInViewportWidth:e.MINIMUM_WIDTH,Number.MAX_VALUE),c=o.width-d-u};switch(t){case"top":g();break;case"bottom":_();break;case"left":f();break;case"right":y();break;case"topleft":g(),f();break;case"topright":g(),y();break;case"bottomleft":_(),f();break;case"bottomright":_(),y()}var v={};h<=p?v.top=h:v.bottom=p,d<=c?v.left=d:v.right=c,v.height=m,v.width=u,i.setBounds(v)})),{dispose:function(){s.release()}},(0,events_1.addDisposableListener)(window,"pointerup",(function(){o.dispose(),i._onDidChangeEnd.fire()})))})))},e.prototype.getMinimumWidth=function(t){return"number"==typeof this.options.minimumInViewportWidth?t-this.options.minimumInViewportWidth:0},e.prototype.getMinimumHeight=function(t){return"number"==typeof this.options.minimumInViewportHeight?t-this.options.minimumInViewportHeight:0},e.prototype.dispose=function(){arialLevelTracker.destroy(this._element),this._element.remove(),t.prototype.dispose.call(this)},e.MINIMUM_HEIGHT=20,e.MINIMUM_WIDTH=20,e}(lifecycle_1.CompositeDisposable);exports.Overlay=Overlay;
//# sourceMappingURL=/sm/6a6778774e62e097d3aa7dc641eb726e675f91c0581a3ca1b63622f62bb168cf.map