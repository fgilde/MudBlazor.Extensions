/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/cjs/popoutWindow.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),__awaiter=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))((function(i,r){function s(t){try{a(n.next(t))}catch(t){r(t)}}function l(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(s,l)}a((n=n.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(a){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(s=0)),s;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(6===l[0]&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=e.call(t,s)}catch(t){l=[6,t],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,a])}}},__read=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,r=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PopoutWindow=void 0;var dom_1=require("./dom"),events_1=require("./events"),lifecycle_1=require("./lifecycle"),PopoutWindow=function(t){function e(e,o,n){var i=t.call(this)||this;return i.target=e,i.className=o,i.options=n,i._onWillClose=new events_1.Emitter,i.onWillClose=i._onWillClose.event,i._onDidClose=new events_1.Emitter,i.onDidClose=i._onDidClose.event,i._window=null,i.addDisposables(i._onWillClose,i._onDidClose,{dispose:function(){i.close()}}),i}return __extends(e,t),Object.defineProperty(e.prototype,"window",{get:function(){var t,e;return null!==(e=null===(t=this._window)||void 0===t?void 0:t.value)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),e.prototype.dimensions=function(){if(!this._window)return null;var t=this._window.value.screenX;return{top:this._window.value.screenY,left:t,width:this._window.value.innerWidth,height:this._window.value.innerHeight}},e.prototype.close=function(){var t,e;this._window&&(this._onWillClose.fire(),null===(e=(t=this.options).onWillClose)||void 0===e||e.call(t,{id:this.target,window:this._window.value}),this._window.disposable.dispose(),this._window=null,this._onDidClose.fire())},e.prototype.open=function(){var t,e;return __awaiter(this,void 0,void 0,(function(){var o,n,i,r,s,l=this;return __generator(this,(function(a){if(this._window)throw new Error("instance of popout window is already open");return o="".concat(this.options.url),n=Object.entries({top:this.options.top,left:this.options.left,width:this.options.width,height:this.options.height}).map((function(t){var e=__read(t,2),o=e[0],n=e[1];return"".concat(o,"=").concat(n)})).join(","),(i=window.open(o,this.target,n))?(r=new lifecycle_1.CompositeDisposable,this._window={value:i,disposable:r},r.addDisposables(lifecycle_1.Disposable.from((function(){i.close()})),(0,events_1.addDisposableListener)(window,"beforeunload",(function(){l.close()}))),s=this.createPopoutWindowContainer(),this.className&&s.classList.add(this.className),null===(e=(t=this.options).onDidOpen)||void 0===e||e.call(t,{id:this.target,window:i}),[2,new Promise((function(t,e){i.addEventListener("unload",(function(t){})),i.addEventListener("load",(function(){try{var o=i.document;o.title=document.title,o.body.appendChild(s),(0,dom_1.addStyles)(o,window.document.styleSheets),(0,events_1.addDisposableListener)(i,"beforeunload",(function(){l.close()})),t(s)}catch(t){e(t)}}))}))]):[2,null]}))}))},e.prototype.createPopoutWindowContainer=function(){var t=document.createElement("div");return t.classList.add("dv-popout-window"),t.id="dv-popout-window",t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.top="0px",t.style.left="0px",t},e}(lifecycle_1.CompositeDisposable);exports.PopoutWindow=PopoutWindow;
//# sourceMappingURL=/sm/e9aab34e700cbcdf252fd9b7139a090292e188153e16029654245dbba3378152.map