/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/dockview-core@4.7.1/dist/cjs/gridview/gridviewComponent.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(i,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])},e(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var i,t=1,o=arguments.length;t<o;t++)for(var r in i=arguments[t])Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);return e},__assign.apply(this,arguments)},__values=this&&this.__values||function(e){var i="function"==typeof Symbol&&Symbol.iterator,t=i&&e[i],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(e,i){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,r,n=t.call(e),a=[];try{for(;(void 0===i||i-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}return a};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridviewComponent=void 0;var gridview_1=require("./gridview"),array_1=require("../array"),lifecycle_1=require("../lifecycle"),baseComponentGridview_1=require("./baseComponentGridview"),events_1=require("../events"),GridviewComponent=function(e){function i(i,t){var o,r=e.call(this,i,{proportionalLayout:null===(o=t.proportionalLayout)||void 0===o||o,orientation:t.orientation,styles:t.hideBorders?{separatorBorder:"transparent"}:void 0,disableAutoResizing:t.disableAutoResizing,className:t.className})||this;return r._onDidLayoutfromJSON=new events_1.Emitter,r.onDidLayoutFromJSON=r._onDidLayoutfromJSON.event,r._onDidRemoveGroup=new events_1.Emitter,r.onDidRemoveGroup=r._onDidRemoveGroup.event,r._onDidAddGroup=new events_1.Emitter,r.onDidAddGroup=r._onDidAddGroup.event,r._onDidActiveGroupChange=new events_1.Emitter,r.onDidActiveGroupChange=r._onDidActiveGroupChange.event,r._options=t,r.addDisposables(r._onDidAddGroup,r._onDidRemoveGroup,r._onDidActiveGroupChange,r.onDidAdd((function(e){r._onDidAddGroup.fire(e)})),r.onDidRemove((function(e){r._onDidRemoveGroup.fire(e)})),r.onDidActiveChange((function(e){r._onDidActiveGroupChange.fire(e)}))),r}return __extends(i,e),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.gridview.orientation},set:function(e){this.gridview.orientation=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deserializer",{get:function(){return this._deserializer},set:function(e){this._deserializer=e},enumerable:!1,configurable:!0}),i.prototype.updateOptions=function(i){e.prototype.updateOptions.call(this,i);var t="string"==typeof i.orientation&&this.gridview.orientation!==i.orientation;this._options=__assign(__assign({},this.options),i),t&&(this.gridview.orientation=i.orientation),this.layout(this.gridview.width,this.gridview.height,!0)},i.prototype.removePanel=function(e){this.removeGroup(e)},i.prototype.toJSON=function(){var e;return{grid:this.gridview.serialize(),activePanel:null===(e=this.activeGroup)||void 0===e?void 0:e.id}},i.prototype.setVisible=function(e,i){this.gridview.setViewVisible((0,gridview_1.getGridLocation)(e.element),i)},i.prototype.setActive=function(e){this._groups.forEach((function(i,t){i.value.setActive(e===i.value)}))},i.prototype.focus=function(){var e;null===(e=this.activeGroup)||void 0===e||e.focus()},i.prototype.fromJSON=function(e){var i,t,o=this;this.clear();var r=e.grid,n=e.activePanel;try{var a=[],s=this.width,u=this.height;if(this.gridview.deserialize(r,{fromJSON:function(e){var i=e.data,t=o.options.createComponent({id:i.id,name:i.component});return a.push((function(){return t.init({params:i.params,minimumWidth:i.minimumWidth,maximumWidth:i.maximumWidth,minimumHeight:i.minimumHeight,maximumHeight:i.maximumHeight,priority:i.priority,snap:!!i.snap,accessor:o,isVisible:e.visible})})),o._onDidAddGroup.fire(t),o.registerPanel(t),t}}),this.layout(s,u,!0),a.forEach((function(e){return e()})),"string"==typeof n){var d=this.getPanel(n);d&&this.doSetGroupActive(d)}}catch(e){try{for(var p=__values(this.groups),c=p.next();!c.done;c=p.next()){var v=c.value;v.dispose(),this._groups.delete(v.id),this._onDidRemoveGroup.fire(v)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(t=p.return)&&t.call(p)}finally{if(i)throw i.error}}throw this.clear(),e}this._onDidLayoutfromJSON.fire()},i.prototype.clear=function(){var e,i,t=this.activeGroup,o=Array.from(this._groups.values());try{for(var r=__values(o),n=r.next();!n.done;n=r.next()){var a=n.value;a.disposable.dispose(),this.doRemoveGroup(a.value,{skipActive:!0})}}catch(i){e={error:i}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}t&&this.doSetGroupActive(void 0),this.gridview.clear()},i.prototype.movePanel=function(e,i){var t,o,r=this.gridview.remove(e),n=null===(t=this._groups.get(i.reference))||void 0===t?void 0:t.value;if(!n)throw new Error("reference group ".concat(i.reference," does not exist"));var a=(0,baseComponentGridview_1.toTarget)(i.direction);if("center"===a)throw new Error("".concat(a," not supported as an option"));var s=(0,gridview_1.getGridLocation)(n.element);o=(0,gridview_1.getRelativeLocation)(this.gridview.orientation,s,a),this.doAddGroup(r,o,i.size)},i.prototype.addPanel=function(e){var i,t,o,r,n=null!==(i=e.location)&&void 0!==i?i:[0];if(null===(t=e.position)||void 0===t?void 0:t.referencePanel){var a=null===(o=this._groups.get(e.position.referencePanel))||void 0===o?void 0:o.value;if(!a)throw new Error("reference group ".concat(e.position.referencePanel," does not exist"));var s=(0,baseComponentGridview_1.toTarget)(e.position.direction);if("center"===s)throw new Error("".concat(s," not supported as an option"));var u=(0,gridview_1.getGridLocation)(a.element);n=(0,gridview_1.getRelativeLocation)(this.gridview.orientation,u,s)}var d=this.options.createComponent({id:e.id,name:e.component});return d.init({params:null!==(r=e.params)&&void 0!==r?r:{},minimumWidth:e.minimumWidth,maximumWidth:e.maximumWidth,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,priority:e.priority,snap:!!e.snap,accessor:this,isVisible:!0}),this.registerPanel(d),this.doAddGroup(d,n,e.size),this.doSetGroupActive(d),d},i.prototype.registerPanel=function(e){var i=this,t=new lifecycle_1.CompositeDisposable(e.api.onDidFocusChange((function(t){t.isFocused&&i._groups.forEach((function(i){var t=i.value;t!==e?t.setActive(!1):t.setActive(!0)}))})));this._groups.set(e.id,{value:e,disposable:t})},i.prototype.moveGroup=function(e,i,t){var o=this.getPanel(i);if(!o)throw new Error("invalid operation");var r=(0,gridview_1.getGridLocation)(e.element),n=(0,gridview_1.getRelativeLocation)(this.gridview.orientation,r,t),a=__read((0,array_1.tail)(n),2),s=a[0],u=a[1],d=(0,gridview_1.getGridLocation)(o.element),p=__read((0,array_1.tail)(d),2),c=p[0],v=p[1];if((0,array_1.sequenceEquals)(c,s))this.gridview.moveView(c,v,u);else{var l=this.doRemoveGroup(o,{skipActive:!0,skipDispose:!0}),h=(0,gridview_1.getGridLocation)(e.element),f=(0,gridview_1.getRelativeLocation)(this.gridview.orientation,h,t);this.doAddGroup(l,f)}},i.prototype.removeGroup=function(i){e.prototype.removeGroup.call(this,i)},i.prototype.dispose=function(){e.prototype.dispose.call(this),this._onDidLayoutfromJSON.dispose()},i}(baseComponentGridview_1.BaseGrid);exports.GridviewComponent=GridviewComponent;
//# sourceMappingURL=/sm/bbaef0863a1a1629319a21ef205b1927d541f0a191b725051050ed1b993e7e92.map